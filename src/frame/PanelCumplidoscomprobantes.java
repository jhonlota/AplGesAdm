/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * PanelCumplidoscomprobantes.java
 *
 * Created on 16/01/2012, 05:14:48 PM
 */
package frame;

import clases.ClaseGeneral;
import clases.ClaseInformacion;
import clases.ClaseMensaje;
import entidades.Cumplidoscomprobantes;
import entidades.CumplidoscomprobantesPK;
import entidades.Facturascomprobantes;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.jdesktop.swingx.autocomplete.AutoCompleteDecorator;

/**
 *
 * @author Jhon Lopez
 */
public class PanelCumplidoscomprobantes extends javax.swing.JPanel {

    private List lista = new ArrayList();
    private ClaseInformacion informacion = new ClaseInformacion();

    /**
     * Creates new form PanelCumplidoscomprobantes
     */
    public PanelCumplidoscomprobantes() {
        initComponents();
        
        fkcomprobante.setText("" + ClaseGeneral.comprobantes.getId());
        ano.setText("" + ClaseGeneral.comprobantes.getAno());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel2 = new javax.swing.JLabel();
        fkcomprobante = new javax.swing.JTextField();
        jLabel75 = new javax.swing.JLabel();
        jSeparator21 = new javax.swing.JSeparator();
        jLabel3 = new javax.swing.JLabel();
        ano = new javax.swing.JTextField();
        jLabel76 = new javax.swing.JLabel();
        jSeparator22 = new javax.swing.JSeparator();
        jLabel5 = new javax.swing.JLabel();
        tipo = new javax.swing.JComboBox();
        jLabel37 = new javax.swing.JLabel();
        fktercerofuncionario = new javax.swing.JTextField();
        botonBuscarFktercerofuncionario = new javax.swing.JButton();
        jLabel32 = new javax.swing.JLabel();
        nombreactivo = new javax.swing.JTextField();
        jTextField11 = new javax.swing.JTextField();
        jPanel5 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        contenido = new javax.swing.JTextArea();

        setName("panelCumplidoscomprobantes"); // NOI18N
        setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT));

        jLabel2.setText("NÚMERO DE LA SOLICITUD : ");
        jLabel2.setPreferredSize(new java.awt.Dimension(175, 25));
        add(jLabel2);

        fkcomprobante.setBackground(ClaseGeneral.verde);
        fkcomprobante.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        fkcomprobante.setForeground(ClaseGeneral.rojo);
        fkcomprobante.setFocusable(false);
        fkcomprobante.setMargin(new java.awt.Insets(2, 4, 2, 4));
        fkcomprobante.setPreferredSize(new java.awt.Dimension(150, 25));
        add(fkcomprobante);

        jLabel75.setPreferredSize(new java.awt.Dimension(10, 25));
        add(jLabel75);

        jSeparator21.setOrientation(javax.swing.SwingConstants.VERTICAL);
        jSeparator21.setPreferredSize(new java.awt.Dimension(20, 25));
        add(jSeparator21);

        jLabel3.setText("AÑO : ");
        jLabel3.setPreferredSize(new java.awt.Dimension(60, 25));
        add(jLabel3);

        ano.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        ano.setText("0");
        ano.setFocusable(false);
        ano.setMargin(new java.awt.Insets(2, 4, 2, 4));
        ano.setPreferredSize(new java.awt.Dimension(75, 25));
        add(ano);

        jLabel76.setPreferredSize(new java.awt.Dimension(10, 25));
        add(jLabel76);

        jSeparator22.setOrientation(javax.swing.SwingConstants.VERTICAL);
        jSeparator22.setPreferredSize(new java.awt.Dimension(20, 25));
        add(jSeparator22);

        jLabel5.setText("TIPO : ");
        jLabel5.setPreferredSize(new java.awt.Dimension(50, 25));
        add(jLabel5);

        tipo.setBackground(ClaseGeneral.campo);
        tipo.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        tipo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Seleccione", "Recibido a satisfacción", "Servicio de mantenimiento" }));
        tipo.setPreferredSize(new java.awt.Dimension(195, 25));
        tipo.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                tipoItemStateChanged(evt);
            }
        });
        add(tipo);

        jLabel37.setText("CÉDULA DE QUIEN SOLICITA  : ");
        jLabel37.setPreferredSize(new java.awt.Dimension(190, 25));
        add(jLabel37);

        fktercerofuncionario.setBackground(ClaseGeneral.campo);
        fktercerofuncionario.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        fktercerofuncionario.setFocusable(false);
        fktercerofuncionario.setMargin(new java.awt.Insets(2, 4, 2, 4));
        fktercerofuncionario.setPreferredSize(new java.awt.Dimension(585, 25));
        add(fktercerofuncionario);

        botonBuscarFktercerofuncionario.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos24/search_user.png"))); // NOI18N
        botonBuscarFktercerofuncionario.setFocusable(false);
        botonBuscarFktercerofuncionario.setName("botonBuscarFktercerofuncionario"); // NOI18N
        botonBuscarFktercerofuncionario.setPreferredSize(new java.awt.Dimension(25, 24));
        botonBuscarFktercerofuncionario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botonBuscarFktercerofuncionarioActionPerformed(evt);
            }
        });
        add(botonBuscarFktercerofuncionario);

        jLabel32.setText("INFORMACION DEL ACTIVO : ");
        jLabel32.setPreferredSize(new java.awt.Dimension(180, 25));
        add(jLabel32);

        nombreactivo.setBackground(ClaseGeneral.campo);
        nombreactivo.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        nombreactivo.setMargin(new java.awt.Insets(2, 4, 2, 4));
        nombreactivo.setPreferredSize(new java.awt.Dimension(350, 25));
        add(nombreactivo);

        jTextField11.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextField11.setEnabled(false);
        jTextField11.setFocusable(false);
        jTextField11.setMargin(new java.awt.Insets(2, 4, 2, 4));
        jTextField11.setOpaque(false);
        jTextField11.setPreferredSize(new java.awt.Dimension(270, 25));
        add(jTextField11);

        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "CONTENIDO", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 13))); // NOI18N
        jPanel5.setPreferredSize(new java.awt.Dimension(810, 475));
        jPanel5.setLayout(new java.awt.BorderLayout());

        jScrollPane2.setPreferredSize(new java.awt.Dimension(430, 70));

        contenido.setBackground(ClaseGeneral.campo);
        contenido.setColumns(20);
        contenido.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        contenido.setLineWrap(true);
        contenido.setRows(15);
        contenido.setWrapStyleWord(true);
        contenido.setMargin(new java.awt.Insets(2, 5, 2, 5));
        jScrollPane2.setViewportView(contenido);

        jPanel5.add(jScrollPane2, java.awt.BorderLayout.CENTER);

        add(jPanel5);
    }// </editor-fold>//GEN-END:initComponents

    private void botonBuscarFktercerofuncionarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botonBuscarFktercerofuncionarioActionPerformed
        javax.swing.JButton componente = (javax.swing.JButton) evt.getSource();
        String eventoFktercero = componente.getName();
        ExternoPanelFktercero panelFktercero = new ExternoPanelFktercero();
        ClaseMensaje.panel(panelFktercero);
        if (eventoFktercero.equals("botonBuscarFktercerofuncionario")) {
            if (!panelFktercero.fktercero.equals("Seleccione - ")) {
                fktercerofuncionario.setText(panelFktercero.fktercero);
            }
        }
    }//GEN-LAST:event_botonBuscarFktercerofuncionarioActionPerformed

    private void tipoItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_tipoItemStateChanged
        String texto = "";
        nombreactivo.setFocusable(true);

        if (tipo.getSelectedItem().equals("Recibido a satisfacción")) {
            try {
                texto += "EL SEÑOR(A) " + ClaseGeneral.comprobantes.getFktercero().substring(ClaseGeneral.comprobantes.getFktercero().indexOf(" - ") + 3) + ", IDENTIFICADO CON NUMERO DE DOCUMENTO "
                        + ClaseGeneral.comprobantes.getFktercero().substring(0, ClaseGeneral.comprobantes.getFktercero().indexOf(" - ")) + ". ENTREGO A SATISFACCION LO DESCRITO EN LA(S) SIGUIENTE(S) "
                        + "FACTURA Y/O CUENTA DE COBRO :\n\n";

                lista = ClaseGeneral.controlFacturascomprobantes.findAllInFacturascomprobantesByFkcomprobante(Integer.parseInt("" + fkcomprobante.getText()), Integer.parseInt("" + ano.getText()));

                int i = 0;
                for (Object lista1 : lista) {
                    ClaseGeneral.facturascomprobantes = (Facturascomprobantes) lista1;
                    texto += "   * " + ClaseGeneral.facturascomprobantes.getFacturascomprobantesPK().getNumero() + " - $ ";
                    texto += ClaseInformacion.formatoDecimal.format(ClaseGeneral.facturascomprobantes.getValor()) + "\n";
                    i++;
                }

                texto += "\nVALOR TOTAL DE LA COMPRA : $ " + ClaseGeneral.comprobantes.getValor() + ".";
            } catch (Exception ex) {
                Logger.getLogger(PanelCumplidoscomprobantes.class.getName()).log(Level.SEVERE, null, ex);
            }

        } else if (tipo.getSelectedItem().equals("Servicio de mantenimiento")) {
            texto += "EL SEÑOR(A) " + ClaseGeneral.comprobantes.getFktercero().substring(ClaseGeneral.comprobantes.getFktercero().indexOf(" - ") + 3) + ", IDENTIFICADO CON NUMERO DE DOCUMENTO "
                    + ClaseGeneral.comprobantes.getFktercero().substring(0, ClaseGeneral.comprobantes.getFktercero().indexOf(" - ")) + ". PRESTO EL SERVICIO DE MATENIMIENTO DE (EL / LOS) EQUIPO(S) "
                    + nombreactivo.getText() + ", EN LA " + ClaseGeneral.dependencia + ", DESCRITO CON EL SIGUIENTE CONCEPTO :\n\n" + ClaseGeneral.comprobantes.getObservacion();
            nombreactivo.setFocusable(false);
        }

        contenido.setText(texto);
    }//GEN-LAST:event_tipoItemStateChanged

    public void metodoInsertar() {
        ClaseGeneral.cumplidoscomprobantes = new Cumplidoscomprobantes();
        ClaseGeneral.cumplidoscomprobantesPK = new CumplidoscomprobantesPK();
        ClaseGeneral.cumplidoscomprobantesPK.setFkcomprobante(Integer.parseInt("" + fkcomprobante.getText()));
        ClaseGeneral.cumplidoscomprobantesPK.setAno(Integer.parseInt("" + ano.getText()));
        ClaseGeneral.cumplidoscomprobantes.setCumplidoscomprobantesPK(ClaseGeneral.cumplidoscomprobantesPK);
        ClaseGeneral.cumplidoscomprobantes.setContenido(contenido.getText().toUpperCase());
        ClaseGeneral.cumplidoscomprobantes.setFktercerofuncionario("" + fktercerofuncionario.getText());

        try {
            ClaseGeneral.controlCumplidoscomprobantes.create(ClaseGeneral.cumplidoscomprobantes);
        } catch (Exception ex) {
            Logger.getLogger(PanelCumplidoscomprobantes.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void metodoConsultar() {
        try {
            fkcomprobante.setText("" + ClaseGeneral.cumplidoscomprobantes.getCumplidoscomprobantesPK().getFkcomprobante());
            ano.setText("" + ClaseGeneral.cumplidoscomprobantes.getCumplidoscomprobantesPK().getAno());
            contenido.setText(ClaseGeneral.cumplidoscomprobantes.getContenido());
            fktercerofuncionario.setText(ClaseGeneral.cumplidoscomprobantes.getFktercerofuncionario());

            fkcomprobante.setFocusable(false);
            //ano.setEditable(false);
        } catch (Exception ex) {
            Logger.getLogger(PanelResoluciones.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void metodoActualizar() {
        Cumplidoscomprobantes cumplidoscomprobantesId = ClaseGeneral.cumplidoscomprobantes;
        cumplidoscomprobantesId.setCumplidoscomprobantesPK(ClaseGeneral.cumplidoscomprobantes.getCumplidoscomprobantesPK());

        ClaseGeneral.cumplidoscomprobantes = new Cumplidoscomprobantes();
        ClaseGeneral.cumplidoscomprobantesPK = new CumplidoscomprobantesPK();
        ClaseGeneral.cumplidoscomprobantesPK.setFkcomprobante(Integer.parseInt("" + fkcomprobante.getText()));
        ClaseGeneral.cumplidoscomprobantesPK.setAno(Integer.parseInt("" + ano.getText()));
        ClaseGeneral.cumplidoscomprobantes.setCumplidoscomprobantesPK(ClaseGeneral.cumplidoscomprobantesPK);
        ClaseGeneral.cumplidoscomprobantes.setContenido(contenido.getText().toUpperCase());
        ClaseGeneral.cumplidoscomprobantes.setFktercerofuncionario("" + fktercerofuncionario.getText());

        try {
            ClaseGeneral.controlCumplidoscomprobantes.edit(ClaseGeneral.cumplidoscomprobantes, cumplidoscomprobantesId);
        } catch (Exception ex) {
            Logger.getLogger(PanelCumplidoscomprobantes.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void metodoEliminar() {
        try {
            ClaseGeneral.cumplidoscomprobantesPK = new CumplidoscomprobantesPK();
            ClaseGeneral.cumplidoscomprobantesPK.setFkcomprobante(Integer.parseInt("" + fkcomprobante.getText()));
            ClaseGeneral.cumplidoscomprobantesPK.setAno(Integer.parseInt("" + ano.getText()));

            ClaseGeneral.controlCumplidoscomprobantes.destroy(ClaseGeneral.cumplidoscomprobantesPK);
        } catch (Exception ex) {
            Logger.getLogger(PanelCumplidoscomprobantes.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    public javax.swing.JTextField ano;
    private javax.swing.JButton botonBuscarFktercerofuncionario;
    public javax.swing.JTextArea contenido;
    public javax.swing.JTextField fkcomprobante;
    private javax.swing.JTextField fktercerofuncionario;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel37;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel75;
    private javax.swing.JLabel jLabel76;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JSeparator jSeparator21;
    private javax.swing.JSeparator jSeparator22;
    private javax.swing.JTextField jTextField11;
    private javax.swing.JTextField nombreactivo;
    public javax.swing.JComboBox tipo;
    // End of variables declaration//GEN-END:variables
}
